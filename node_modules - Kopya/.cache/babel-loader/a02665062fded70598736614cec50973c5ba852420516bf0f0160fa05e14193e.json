{"ast":null,"code":"import axios from \"axios\";\nconst handleLogin = async () => {\n  try {\n    var _role$;\n    const res = await axios.post(\"http://localhost:8080/api/auth/login\", {\n      username,\n      password\n    });\n    const {\n      token,\n      role,\n      username: loggedUsername\n    } = res.data;\n\n    // Token ve kullanıcı adını sakla\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"username\", loggedUsername);\n\n    // role bir dizi: örnek [{ authority: \"PROJE_YONETICISI\" }]\n    const userRole = (_role$ = role[0]) === null || _role$ === void 0 ? void 0 : _role$.authority;\n    localStorage.setItem(\"role\", userRole);\n    if (userRole === \"PROJE_YONETICISI\") {\n      navigate(\"/admin\");\n    } else if (userRole === \"CALISAN\") {\n      navigate(\"/user\");\n    } else {\n      alert(\"Tanımsız rol\");\n    }\n  } catch (err) {\n    alert(\"Kullanıcı adı veya şifre yanlış\");\n    console.error(\"Giriş hatası:\", err);\n  }\n};","map":{"version":3,"names":["axios","handleLogin","_role$","res","post","username","password","token","role","loggedUsername","data","localStorage","setItem","userRole","authority","navigate","alert","err","console","error"],"sources":["C:/Users/Lenovo/OneDrive/Masaüstü/spring_front_app/frontend/src/pages/Login.jsx"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst handleLogin = async () => {\r\n    try {\r\n        const res = await axios.post(\"http://localhost:8080/api/auth/login\", {\r\n            username,\r\n            password\r\n        });\r\n\r\n        const { token, role, username: loggedUsername } = res.data;\r\n\r\n        // Token ve kullanıcı adını sakla\r\n        localStorage.setItem(\"token\", token);\r\n        localStorage.setItem(\"username\", loggedUsername);\r\n\r\n        // role bir dizi: örnek [{ authority: \"PROJE_YONETICISI\" }]\r\n        const userRole = role[0]?.authority;\r\n\r\n        localStorage.setItem(\"role\", userRole);\r\n\r\n        if (userRole === \"PROJE_YONETICISI\") {\r\n            navigate(\"/admin\");\r\n        } else if (userRole === \"CALISAN\") {\r\n            navigate(\"/user\");\r\n        } else {\r\n            alert(\"Tanımsız rol\");\r\n        }\r\n    } catch (err) {\r\n        alert(\"Kullanıcı adı veya şifre yanlış\");\r\n        console.error(\"Giriş hatası:\", err);\r\n    }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IAAA,IAAAC,MAAA;IACA,MAAMC,GAAG,GAAG,MAAMH,KAAK,CAACI,IAAI,CAAC,sCAAsC,EAAE;MACjEC,QAAQ;MACRC;IACJ,CAAC,CAAC;IAEF,MAAM;MAAEC,KAAK;MAAEC,IAAI;MAAEH,QAAQ,EAAEI;IAAe,CAAC,GAAGN,GAAG,CAACO,IAAI;;IAE1D;IACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,KAAK,CAAC;IACpCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEH,cAAc,CAAC;;IAEhD;IACA,MAAMI,QAAQ,IAAAX,MAAA,GAAGM,IAAI,CAAC,CAAC,CAAC,cAAAN,MAAA,uBAAPA,MAAA,CAASY,SAAS;IAEnCH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,QAAQ,CAAC;IAEtC,IAAIA,QAAQ,KAAK,kBAAkB,EAAE;MACjCE,QAAQ,CAAC,QAAQ,CAAC;IACtB,CAAC,MAAM,IAAIF,QAAQ,KAAK,SAAS,EAAE;MAC/BE,QAAQ,CAAC,OAAO,CAAC;IACrB,CAAC,MAAM;MACHC,KAAK,CAAC,cAAc,CAAC;IACzB;EACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;IACVD,KAAK,CAAC,iCAAiC,CAAC;IACxCE,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,GAAG,CAAC;EACvC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}